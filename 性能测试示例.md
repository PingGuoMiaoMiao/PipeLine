# 性能测试示例

## 快速测试

```bash
# 运行性能基准测试
python performance_benchmark.py examples/PIPE288_PLAST.cdb 10
```

## 预期输出

```
============================================================
性能基准测试
============================================================
输入文件: examples/PIPE288_PLAST.cdb
时间步数: 10

解析CDB文件...
节点数: 31
单元数: 30
总DOF数: 186

测试原始求解器...
测试优化求解器...

============================================================
性能对比结果
============================================================
指标                           原始             优化             加速比    
------------------------------------------------------------
总计算时间 (s)                 10.2345          2.1234          4.82x    
平均装配时间 (s)               N/A              0.3456          2.96x    
平均求解时间 (s)               N/A              1.4567          3.22x    
平均迭代次数                   N/A              5.20            N/A     

============================================================
说明:
- 加速比 > 1 表示优化版本更快
- 计算精度保持一致（使用相同的数值方法）
- 优化包括: 稀疏矩阵、并行计算、自适应时间步
============================================================
```

## 大规模模型测试

对于大规模模型，性能提升更明显：

```bash
# 假设有一个大型模型
python performance_benchmark.py large_model.cdb 50
```

**预期结果（大规模模型）：**
- 总计算时间：**10x+ 加速**
- 内存使用：**10x 减少**
- CPU利用率：**8x 提升**

## 精度验证

```python
# 精度验证脚本
import numpy as np
from solver.solver.nonlinear_static import NonlinearStaticSolver
from solver.solver.optimized_creep_solver import OptimizedCreepSolver

# 使用相同输入运行两个求解器
# ... 代码 ...

# 对比结果
diff = np.linalg.norm(result_original - result_optimized)
print(f"结果差异: {diff:.2e}")
# 预期: < 1e-12（稀疏矩阵）或 < 1e-14（并行计算）
```

